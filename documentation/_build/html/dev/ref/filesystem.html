<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>lucid.filesystem &mdash; Lucid v1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '1.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: ''
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/interface.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="contents" title="Global table of contents" href="../../contents.html" />
    <link rel="index" title="Global index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="Lucid v1.0 documentation" href="../../index.html" />
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li><a href="../../index.html">Lucid v1.0 documentation</a> &raquo;</li>
      </ul>
    </div>
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  
  <div class="section" id="s-module-lucid.filesystem">
<span id="s-dev-ref-filesystem"></span><h1 id="module-lucid.filesystem"><span id="dev-ref-filesystem"></span>lucid.filesystem<a class="headerlink" href="#module-lucid.filesystem" title="Permalink to this headline">¶</a></h1>
<p>Lucid&#8217;s filesystem provides an easy way to read and write to the server. You can also read and write to remote servers as well.</p>
<p>In the event that you try to connect to a remote server, and a password is required, the filesystem will automaitically show a password dialog and retry the request. This way, you don&#8217;t have to bother with it in your own application.</p>
<p>All of the methods are asyncronous, and return cancelable <tt class="docutils literal"><span class="pre">dojo.Deferred</span></tt> objects.</p>
<div class="section" id="s-reading">
<h2 id="reading">Reading<a class="headerlink" href="#reading" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-listing-a-directory-and-fetching-file-information">
<h3 id="listing-a-directory-and-fetching-file-information">Listing a directory and fetching file information<a class="headerlink" href="#listing-a-directory-and-fetching-file-information" title="Permalink to this headline">¶</a></h3>
<p>To list a directory, use the <tt class="docutils literal"><span class="pre">listDirectory</span></tt> method:</p>
<div class="highlight"><pre><span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">listDirectory</span><span class="p">(</span><span class="s2">&quot;file://&quot;</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">files</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">files</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;something bad happened&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<p>Each slot on the array returned contains the following structure:</p>
<div class="highlight"><pre><span class="nx">_fileInfo</span><span class="o">:</span> <span class="p">{</span>
    <span class="c">//  name: String</span>
    <span class="c">//      the name of the file</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="o">,</span>
    <span class="c">//  type: String</span>
    <span class="c">//      the mimetype of the file (&quot;text/directory&quot; for directories)</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="o">,</span>
    <span class="c">//  size: Int</span>
    <span class="c">//      the size of the file (in bytes)</span>
    <span class="nx">size</span><span class="o">:</span> <span class="mi">0</span><span class="o">,</span>
    <span class="c">//  modified: String</span>
    <span class="c">//      a timestamp of when the file was last modified</span>
    <span class="nx">modified</span><span class="o">:</span> <span class="s2">&quot;F d Y H:i:s.&quot;</span>
<span class="p">}</span><span class="o">,</span>
</pre></div>
<p>The <tt class="docutils literal"><span class="pre">info</span></tt> method can be used to get information about a file. It returns only one <tt class="docutils literal"><span class="pre">_fileInfo</span></tt> object, where <tt class="docutils literal"><span class="pre">listDirectory</span></tt> returns an array of <tt class="docutils literal"><span class="pre">_fileInfo</span></tt> objects.</p>
<div class="highlight"><pre><span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;file://something.txt&quot;</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">info</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">info</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="p">}</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;something bad happened&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="section" id="s-reading-file-contents">
<h3 id="reading-file-contents">Reading file contents<a class="headerlink" href="#reading-file-contents" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">readFileContents</span></tt> method to get a file's contents.</p>
<div class="highlight"><pre><span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">readFileContents</span><span class="p">(</span><span class="s2">&quot;file://something.txt&quot;</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;file contents: &quot;</span><span class="o">+</span><span class="nx">content</span><span class="p">);</span>
<span class="p">}</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;something bad happened&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="s-writing">
<h2 id="writing">Writing<a class="headerlink" href="#writing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-creating-directories">
<h3 id="creating-directories">Creating directories<a class="headerlink" href="#creating-directories" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">createDirectory</span></tt> method to make a new directory. If the directory already exists, then nothing will happen.</p>
<div class="highlight"><pre><span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">createDirectory</span><span class="p">(</span><span class="s2">&quot;file://folderName/&quot;</span><span class="o">,</span> <span class="k">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;file created!&quot;</span><span class="p">);</span>
<span class="p">}</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;something bad happened&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="section" id="s-removing-files">
<h3 id="removing-files">Removing files<a class="headerlink" href="#removing-files" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">remove</span></tt> method to remove a file or directory. In the case of a directory, it will be deleted recursively.</p>
<div class="highlight"><pre><span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s2">&quot;file://something.txt&quot;</span><span class="o">,</span> <span class="k">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;file deleted!&quot;</span><span class="p">);</span>
<span class="p">}</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;something bad happened&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="section" id="s-copying-files">
<h3 id="copying-files">Copying files<a class="headerlink" href="#copying-files" title="Permalink to this headline">¶</a></h3>
<p>To copy a file or directory, use the <tt class="docutils literal"><span class="pre">copy</span></tt> method. In the case of a directory, it will copy it recursively. The first argument is the source, and the second is the target. If the target directory does not exist, it is created. You must provide the full name of the file in the target directory.</p>
<div class="highlight"><pre><span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="s2">&quot;file://someFile.txt&quot;</span><span class="o">,</span> <span class="s2">&quot;file://someFolder/someFile.txt&quot;</span><span class="o">,</span> <span class="k">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;copied file!&quot;</span><span class="p">);</span>
 <span class="p">}</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;something bad happened&quot;</span><span class="p">);</span>
 <span class="p">});</span>
</pre></div>
</div>
<div class="section" id="s-moving-renaming-files">
<h3 id="moving-renaming-files">Moving/Renaming files<a class="headerlink" href="#moving-renaming-files" title="Permalink to this headline">¶</a></h3>
<p>To rename or move files or directories, use the <tt class="docutils literal"><span class="pre">move</span></tt> method. The first argument is the source, and the second is the target. If the target directory does not exist, it is created. If only a filename is specified in the target, then it will be renamed. To move the file, you must specify a full path in the target argument.</p>
<div class="highlight"><pre><span class="c">// example of renaming a file</span>
<span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">move</span><span class="p">(</span><span class="s2">&quot;file://someDir/someFile.txt&quot;</span><span class="o">,</span> <span class="s2">&quot;newName.txt&quot;</span><span class="o">,</span> <span class="k">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;file renamed!&quot;</span><span class="p">);</span>
<span class="p">}</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;something bad happened&quot;</span><span class="p">);</span>
<span class="p">});</span>
<span class="c">// example of moving a file</span>
<span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">move</span><span class="p">(</span><span class="s2">&quot;file://someDir/someFile.txt&quot;</span><span class="o">,</span> <span class="s2">&quot;file://someFile.txt&quot;</span> <span class="c">/* You can add the onComplete and onError callbacks here as well */</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="s-writing-to-files">
<h3 id="writing-to-files">Writing to files<a class="headerlink" href="#writing-to-files" title="Permalink to this headline">¶</a></h3>
<p>To write to a file, use the <tt class="docutils literal"><span class="pre">writeFileContents</span></tt> method.</p>
<div class="highlight"><pre><span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">writeFileContents</span><span class="p">(</span><span class="s2">&quot;file://someFile.txt&quot;</span><span class="o">,</span> <span class="s2">&quot;here are some\ncontents of the new file&quot;</span><span class="o">,</span> <span class="k">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;file contents written!&quot;</span><span class="p">);</span>
<span class="p">}</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;something bad happened&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="s-misc-features">
<h2 id="misc-features">Misc features<a class="headerlink" href="#misc-features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-downloading-files">
<h3 id="downloading-files">Downloading files<a class="headerlink" href="#downloading-files" title="Permalink to this headline">¶</a></h3>
<p>You can allow the user to download a file off of the filesystem using the <tt class="docutils literal"><span class="pre">download</span></tt> function.</p>
<div class="highlight"><pre><span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">download</span><span class="p">(</span><span class="s2">&quot;file://someFile.txt&quot;</span><span class="p">);</span>
</pre></div>
<p>If it's a directory, it will be downloaded as a zip file. You can specify the archive format with a second argument. You can also use this argument to download a file as an archive. The value provided can be either <tt class="docutils literal"><span class="pre">&quot;zip&quot;</span></tt>, <tt class="docutils literal"><span class="pre">&quot;gzip&quot;</span></tt>, or <tt class="docutils literal"><span class="pre">&quot;bzip&quot;</span></tt>.</p>
<div class="highlight"><pre><span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">download</span><span class="p">(</span><span class="s2">&quot;file://someFile.txt&quot;</span><span class="o">,</span> <span class="s2">&quot;gzip&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="s-embedding-files">
<h3 id="embedding-files">Embedding files<a class="headerlink" href="#embedding-files" title="Permalink to this headline">¶</a></h3>
<p>You can use the <tt class="docutils literal"><span class="pre">embed</span></tt> method to get a URL that can be used to embed the file. This can be used in conjunction with an HTML element, such as <tt class="docutils literal"><span class="pre">&lt;embed&gt;</span></tt>.</p>
<div class="highlight"><pre><span class="k">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">embed</span><span class="p">(</span><span class="s2">&quot;file://someFile.txt&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="s-quota-checking">
<h3 id="quota-checking">Quota checking<a class="headerlink" href="#quota-checking" title="Permalink to this headline">¶</a></h3>
<p>You can check a quota by using the <tt class="docutils literal"><span class="pre">getQuota</span></tt> method. If this is a remote filesystem, and the protocol supports it, this will return the ammount of disk space left.</p>
<div class="highlight"><pre><span class="nx">lucid</span><span class="p">.</span><span class="nx">filesystem</span><span class="p">.</span><span class="nx">getQuota</span><span class="p">(</span><span class="s2">&quot;file://&quot;</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">quota</span><span class="p">){</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;used: &quot;</span><span class="o">+</span><span class="nx">quota</span><span class="p">.</span><span class="nx">used</span><span class="o">+</span><span class="s2">&quot; remaining: &quot;</span><span class="o">+</span><span class="nx">quota</span><span class="p">.</span><span class="nx">remaining</span><span class="o">+</span><span class="s2">&quot; total: &quot;</span><span class="o">+</span><span class="nx">quota</span><span class="p">.</span><span class="nx">total</span><span class="p">);</span>
<span class="p">}</span><span class="o">,</span> <span class="k">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;something bad happened&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference" href="">lucid.filesystem</a><ul>
<li><a class="reference" href="#reading">Reading</a><ul>
<li><a class="reference" href="#listing-a-directory-and-fetching-file-information">Listing a directory and fetching file information</a></li>
<li><a class="reference" href="#reading-file-contents">Reading file contents</a></li>
</ul>
</li>
<li><a class="reference" href="#writing">Writing</a><ul>
<li><a class="reference" href="#creating-directories">Creating directories</a></li>
<li><a class="reference" href="#removing-files">Removing files</a></li>
<li><a class="reference" href="#copying-files">Copying files</a></li>
<li><a class="reference" href="#moving-renaming-files">Moving/Renaming files</a></li>
<li><a class="reference" href="#writing-to-files">Writing to files</a></li>
</ul>
</li>
<li><a class="reference" href="#misc-features">Misc features</a><ul>
<li><a class="reference" href="#downloading-files">Downloading files</a></li>
<li><a class="reference" href="#embedding-files">Embedding files</a></li>
<li><a class="reference" href="#quota-checking">Quota checking</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/dev/ref/filesystem.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li><a href="../../index.html">Lucid v1.0 documentation</a> &raquo;</li>
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright Dojo Foundation and Lucid Contributors.
      Last updated on May 31, 2009.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
    </div>
  </body>
</html>