<html>
	<head>
		<title>Psych Desktop Installer</title>
		<script type="text/javascript" src="../desktop/dojo/dojo/dojo.js" djConfig="parseOnLoad: true"></script>
		<script type="text/javascript" src="install.js"></script>
		<link href="style.css" rel="stylesheet" media="screen" />
		<link href="../desktop/dojo/dijit/themes/dijit.css" rel="stylesheet" media="screen" />
		<link href="../desktop/dojo/dijit/themes/tundra/tundra.css" rel="stylesheet" media="screen" />
		<link href="../desktop/dojo/dijit/themes/tundra/tundra_rtl.css" rel="stylesheet" media="screen" />
	</head>
	<body class="tundra">
		<form dojoType="dijit.form.Form" id="form">
			<div dojoType="dijit.layout.StackContainer" id="wizard" widgetid="wizard">
				<div dojoType="dijit.layout.ContentPane" title="Start" id="start">
					<div class="title">Welcome to the Psych Desktop installer!</div>
					Before you start the installation, you need to change some file permissions:<br /> 
					<div id="perms">please wait...</div>
				</div>
				<div dojoType="dijit.layout.ContentPane" title="installation type">
					<div class="title">What type of installation do you want?</div>
					<input dojoType="dijit.form.RadioButton" id="installtype-new" type="radio" name="type" value="clean" />
					<label for="installtype-new"><b>I want to do a clean installation</b></label>
					<p>Do a new installation, and create a new admin user</p>
					
					<input dojoType="dijit.form.RadioButton" id="installtype-cms" type="radio" name="type" value="CMS" disabled="true" />
					<label for="installtype-cms"><b>I want to do a clean installation, but intergrate it with a CMS</b></label>
					<p>Do a new installation, then configure it to intergrate with a user table from a CMS</p>
					<!-- We should support drupal, joomla/mambo, phpnuke, and some others -->
					
					<input dojoType="dijit.form.RadioButton" id="installtype-reset" type="radio" name="type" value="reset" />
					<label for="installtype-reset"><b>I want to reset my existing installation</b></label>
					<p>Keeps your settings and users, but re-installs apps and other things</p>
				</div>
				<div dojoType="dijit.layout.ContentPane" title="Database" onkeyup="install.fixPDOStr(arguments[0]);">
					<div class="title">Database Settings</div>
					<br />
					Database Backend:
					<div>
						<input dojoType="dijit.form.RadioButton" type="radio" name="db_type" id="db_type_mysql" value="mysql" onchange="setTimeout(install.fixPDOStr, 20);" /> 
						<label for="db_type_mysql"> MySQL 3.x/4.x/5.x</label>
					</div>
					<div>
						<input dojoType="dijit.form.RadioButton" type="radio" name="db_type" value="pgsql" id="db_type_pgsql" disabled="true" onchange="setTimeout(install.fixPDOStr, 20);" />
						<label for="db_type_pgsql"> PostgreSQL</label>
					</div>
					<div>
						<input dojoType="dijit.form.RadioButton" type="radio" name="db_type" value="sqlite" id="db_type_sqlite" disabled="true" onchange="setTimeout(install.fixPDOStr, 20);" />
						<label for="db_type_sqlite"> SQLite 2/3</label>
					</div>
					<div>
						<input dojoType="dijit.form.RadioButton" type="radio" name="db_type" value="oci" id="db_type_oci" disabled="true" onchange="setTimeout(install.fixPDOStr, 20);" />
						<label for="db_type_oci"> Oracle Call Interface</label>
					</div>
					<div>
						<input dojoType="dijit.form.RadioButton" type="radio" name="db_type" value="dblib" id="db_type_dblib" disabled="true" onchange="setTimeout(install.fixPDOStr, 20);" />
						<label for="db_type_dblib"> FreeTDS / Microsoft SQL Server / Sybase</label>
					</div>
					<div>
						<input dojoType="dijit.form.RadioButton" type="radio" name="db_type" value="informix" id="db_type_informix" disabled="true" onchange="setTimeout(install.fixPDOStr, 20);" />
						<label for="db_type_informix"> IBM Informix Dynamic Server</label>
					</div>
					<div>
						<input dojoType="dijit.form.RadioButton" type="radio" name="db_type" value="ibm" id="db_type_ibm" disabled="true" onchange="setTimeout(install.fixPDOStr, 20);" />
						<label for="db_type_ibm"> IBM DB2</label>
					</div>
					<div>
						<input dojoType="dijit.form.RadioButton" type="radio" name="db_type" value="firebird" id="db_type_firebird" disabled="true" onchange="setTimeout(install.fixPDOStr, 20);" />
						<label for="db_type_firebird"> Firebird/Interbase 6</label>
					</div>
					<div>
						<input dojoType="dijit.form.RadioButton" type="radio" name="db_type" value="odbc" id="db_type_odbc" disabled="true" onchange="setTimeout(install.fixPDOStr, 20);" />
						<label for="db_type_odbc"> ODBC v3 (IBM DB2, unixODBC and win32 ODBC)</label>
					</div>
					<br />
					Database Host:&nbsp;
					<input dojoType="dijit.form.TextBox" name="db_host" type="text" /> <i style="font-size: 10pt;">(Path to database for SQLite)</i>
					<br />
					Database Name:&nbsp;
					<input dojoType="dijit.form.TextBox" name="db_name" type="text" /> <i style="font-size: 10pt;">(Not used in SQLite)</i>
					<br />
					Table Prefix:&nbsp;
					<input dojoType="dijit.form.TextBox" name="db_prefix" type="text" /> 
					<br />
					Username:&nbsp;
					<input dojoType="dijit.form.TextBox" name="db_username" type="text" /> <i style="font-size: 10pt;">(Not used in SQLite)</i>
					<br />
					Password:&nbsp;
					<input dojoType="dijit.form.TextBox" name="db_password" type="text" /> <i style="font-size: 10pt;">(Not used in SQLite)</i>
					<br /><br />
					Database connection string: <input dojoType="dijit.form.TextBox" name="db_pdo" id="pdostr" style="width: 400px;" type="text" /><br />
					 <i style="color: red;">Do not change this unless you know what you're doing</i>
				</div>
				<div dojoType="dijit.layout.ContentPane" title="Admin Setup">
					<div class="title">Adminstrative User Settings</div>
					Admin User:&nbsp;
					<input dojoType="dijit.form.TextBox" name="admin_user" type="text" />
					<br />
					Admin Pass:&nbsp;
					<input dojoType="dijit.form.TextBox" name="admin_pass" type="text" />
					<br />
					Admin E-mail:&nbsp;
					<input dojoType="dijit.form.TextBox" name="admin_email" type="text" />
					<br />
				</div>
				<div dojoType="dijit.layout.ContentPane" id="install-page" title="Installing">
					<div class="title">Installing...</div>
					<div id="progressContainer">
						<div id="progressBarContainer">
							<div dojoType="dijit.ProgressBar" id="progressBar" indeterminate="true"></div>
						</div>
						<div id="taskList">
							Starting installation...
						</div>
					</div>
				</div>
				<div dojoType="dijit.layout.ContentPane" title="Finish">
					<div class="title">Installation Completed</div>
					Please delete the /install/ directory for security purposes. You may also want to chmod /backend/configuration.php back to 444. Enjoy!
				</div>
			</div>
		</form>
		<div class="buttons">			
			<button dojoType="dijit.form.Button" id="previous" onClick="dijit.byId('wizard').back()">&lt;</button>
			<button dojoType="dijit.form.Button" id="next" onClick="dijit.byId('wizard').forward()">&gt;</button>
		</div>
	</body>
</html>